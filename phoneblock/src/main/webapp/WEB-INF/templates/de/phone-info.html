<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html>
<html>
<head>
<th:block th:replace="~{fragments/page :: headContent}"/>

<script th:src="@{/{path}/dist/chart.umd.js(path=${deps.chartjs})}" type="text/javascript"/>
<link rel="stylesheet" th:href="@{/assets/css/phone-info.css}"/>
</head>

<body>
<div th:replace="~{fragments/page :: header(login=true)}"/>

<section class="section">
<div class="content">
	<h1 data-tx="t0001">Rufnummer ☎ <th:block th:text="${info.phone}"/></h1>

	<p>
		<th:block th:if="${info.votes} &lt;= 0">
			<th:block th:if="${info.whiteListed}">
				<span class="tag is-info is-success" data-tx="t0002"><i class="fa-solid fa-star"/> Auf der weißen Liste</span>
			</th:block>
			<th:block th:unless="${info.whiteListed}">
				<th:block th:if="${info.votesWildcard &gt; 0}">
					<span class="tag is-info is-warning" data-tx="t0003">Nummernblock mit Spamverdacht</span>
					<span class="|tag is-info ${ratingCssClass}|" th:if="${rating} != 'B_MISSED' &amp;&amp; ${rating} != 'A_LEGITIMATE'" th:text="${ratingLabel}"/>
				</th:block>
				<span class="tag is-info is-success" data-tx="t0004" th:unless="${info.votesWildcard &gt; 0}">Keine Beschwerden</span>
			</th:block>
		</th:block>
		
		<th:block th:unless="${info.votes} &lt;= 0">
			<span class="tag is-info is-warning" data-tx="t0005" th:unless="${blocked}">Beschwerde liegt vor</span>
			<span class="tag is-info is-danger" data-tx="t0006" th:if="${blocked}">Blockiert</span>

			<span th:class="|tag is-info ${ratingCssClass}|" th:if="${rating} != 'B_MISSED'" th:text="${ratingLabel}"/>
		</th:block>
	</p>

<article th:class="'message' + ${info.whiteListed} ? 'is-success' : (${blocked} ? 'is-danger' : 'is-warning')">
  <div class="message-header">
    <p data-tx="t0007">Information zur Rufnummer <th:block th:text="${info.phone}"/></p>
  </div>
  <div class="message-body">
	<p th:if="${summary}" th:text="${summary}"/>

	<p th:if="${defaultSummary}" th:text="${defaultSummary}"/>
  
	<ul>
		<li data-tx="t0008">
			Alternative Schreibweisen: 
			<th:block th:if="${number.shortcut}">
				<code th:text="${number.shortcut}"/>, 
			</th:block>
			<code th:text="${number.plus}"/>, 
			<code th:text="${number.zeroZero}"/>
		</li>
		<li data-tx="t0009">
			Land: <th:block th:text="${number.country}"/> (<code th:text="${number.countryCode}"/>)
		</li>

		<li data-tx="t0010" th:if="${number.city}">
			Stadt: <th:block th:text="${number.city}"/> (<code th:text="${number.cityCode}"/>)
		</li>

		<li data-tx="t0011" th:if="${info.votes} &gt; 0">
			Stimmen für Sperrung: <th:block th:text="${info.votes}"/>
		</li>
		
		<li data-tx="t0012" th:if="${info.votesWildcard} &gt; ${info.votes}">
			Stimmen für Sperrung des Nummernblocks: <th:block th:text="${info.votesWildcard}"/>
		</li>
		
		<li data-tx="t0013" th:if="${info.votes} &gt; 0 or ${info.votesWildcard} &gt; 0">
			Letzte Beschwerde vom: <th:block th:text="${#dates.format(#converters.fromEpoch(info.lastUpdate))}"/>
		</li>

		<li data-tx="t0014" th:if="${info.dateAdded} &gt; 0">
			Nummer aktiv seit: <th:block th:text="${#dates.format(#converters.fromEpoch(info.dateAdded))}"/>
		</li>
	</ul>
  </div>
</article>

	<p data-tx="t0015">
		Unerwünschte Telefonanrufe kannst Du <em>automatisch blockieren</em>, wenn Du PhoneBlock installierst: 
	</p>
	
		<div class="columns">
		  <div class="column is-one-quarter">
			<a th:class="|button is-medium ${fritzbox  ? 'is-primary' : 'is-info'} is-fullwidth|" th:href="@{/anrufbeantworter/}">
			    <span class="icon">
					<img th:src="@{/assets/img/ab/logo/ab-logo-white.svg}"/>
			    </span>
				<span data-tx="t0016">Anrufbeantworter</span>			
			</a>
		  </div>
		  <div class="column is-one-quarter">
			<a th:class="|button is-medium ${fritzbox ? 'is-primary' : 'is-info'} is-fullwidth|" th:href="@{/setup.jsp}">
			    <span class="icon">
					<i class="fa-solid fa-phone"/>
			    </span>
				<span data-tx="t0017">Fritz!Box Telefonbuch</span>			
			</a>
		  </div>
		  <div class="column is-one-quarter">
			<a th:class="|button is-medium ${android ? 'is-primary' : 'is-info'} is-fullwidth|" th:href="@{/setup-android/}">
			    <span class="icon">
					<i class="fa-solid fa-mobile-screen"/>
			    </span>
				<span data-tx="t0018">Für Android</span>
			</a>
		  </div>
		  <div class="column is-one-quarter">
			<a th:class="|button is-medium ${iphone ? 'is-primary' : 'is-info'} is-fullwidth|" th:href="@{/setup-iphone/}">
			    <span class="icon">
					<i class="fa-brands fa-apple"/>
			    </span>
				<span data-tx="t0019">Für iPhone</span>
			</a>
		  </div>
		</div>

<th:block th:if="${relatedNumbers.size &gt; 0}">
	<p data-tx="t0020">Die Nummer ☎ <th:block th:text="${info.phone}"/> könnte zum selben Anschluss gehören wie die folgenden Nummern in der Datenbank:</p>
	
	<blockquote class="related-numbers">
		<span th:each="related : ${relatedNumbers}">
			<a data-onclick="showNumber" data-tx="t0021" th:href="@{/nums/{other}(other=${related})}">☎ <th:block th:text="${related}"/></a>
		</span>
	</blockquote>
</th:block>	

	<h2 data-tx="t0022">Schreib eine Bewertung für <th:block th:text="${info.phone}"/></h2>
	
	<div class="notification is-info" data-tx="t0023" id="thanks" th:if="${thanks}">
	  Danke für Deine Bewertung, Du hilfst damit anderen, die ebenfalls angerufen werden. 
	</div>
	
<th:block th:unless="${thanks}">
	<p data-tx="t0024">
		Du wurdest von ☎ <code><th:block th:text="${info.phone}"/></code> angerufen? 
		Sag anderen, was sie von ☎ <code><th:block th:text="${number.plus}"/></code> zu erwarten haben.
		Wenn Du Dich von Anrufen von ☎ <code><th:block th:text="${info.phone}"/></code> belästigt fühlst, 
		<a th:href="@{/setup.jsp}">installiere PhoneBlock</a> 
		und gibt eine Bewertung für ☎ <code><th:block th:text="${number.zeroZero}"/></code> ab:
	</p>

	<form accept-charset="utf-8" enctype="application/x-www-form-urlencoded" method="post" spellcheck="true" th:action="@{/rating}">
		<input name="phone" th:value="${info.phone}" type="hidden"/>
		
		<div class="buttons">
		  	<label th:class="|button is-rounded ${rating.cssClass}|" th:each="rating : ${ratings}">
		  		<input name="rating" th:value="${rating}" type="radio"/>
			    <span class="icon">
					<i th:class="${rating.iconClass}"/>
			    </span>
				<span th:text="${rating.label}"/>
	  		</label>
		</div>

		<p>			
		<textarea class="textarea is-primary" name="comment" placeholder="Dein Bericht - Keine Beleidigungen, keine Schimpfwörter!"/>
		</p>
		
		<p data-tx="t0025">
		Damit Deine Bewertung sofort einen Einfluss auf Deine Blocklist hat, <a th:href="@{/login.jsp(location=${currentPage})}">melde Dich vorher an</a>!
		</p>
		
		<div class="buttons">
			<button class="button is-rounded is-primary" name="send" type="submit">
			    <span class="icon">
					<i class="fas fa-paper-plane"/>
			    </span>
				<span data-tx="t0026">Abschicken</span>
			</button>
		</div>
	</form>
</th:block>

<div class="columns">
	<div class="column is-half">
	<div th:if="${ratings}">
		<canvas aria-label="Anzahl Bewertungen" height="200" id="ratings" role="img" width="400"/>
		<code id="ratings-data">
		{
	        type: 'bar',
	        data: {
	            labels: <th:block th:text="${ratingLabels}"/>,
	            datasets: [{
	                label: 'Anzahl Bewertungen',
	                data: <th:block th:text="${ratingData}"/>,
	                backgroundColor: <th:block th:text="${ratingBackground}"/>,
	                borderColor: <th:block th:text="${ratingBorder}"/>,
	                borderWidth: 1
	            }]
	        },
	        options: {
	            scales: {
	                y: {
	                    beginAtZero: true
	                }
	            }
	        }
	    }
		</code>
		<script th:src="@{/assets/js/phone-info-ratings.js}" type="text/javascript"/>
	</div>
	<p data-tx="t0027" th:unless="${ratings}">
		Es gibt bisher noch keine Bewertungen, sei der erste, der eine seine Einschätzung teilt!
	</p>
	</div>

	<div class="column is-half">
	<div id="searches-data" th:data-data="${searchData}" th:data-labels="${searchLabels}" th:if="${searches}">
		<canvas aria-label="Suchanfragen in der letzten Woche" height="200" id="searches" role="img" width="400"/>
		<script th:src="@{/assets/js/phone-info-searches.js}" type="text/javascript"/>
	</div>
	<p data-tx="t0028" th:unless="${searches}">Es gibt keine Suchanfragen für diese Nummer.</p>
	</div>
</div>

<th:block th:if="${comments.size &gt; 0}">
	<h2 data-tx="t0029">Kommentare zu <th:block th:text="${number.plus}"/></h2>
	
	<th:block th:each="comment,commentIt : ${comments}">
	
	<input id="votePath" th:value="@{/api/commentVote}" type="hidden"/>
<div class="box">
  <article class="media">
    <div class="media-left">
      <figure class="image is-64x64">
		<i class="fa-solid fa-star" th:if="${#converters.isPositive(comment.rating)}"/>
		<i class="fa-solid fa-triangle-exclamation" th:unless="${#converters.isPositive(comment.rating)}"/>
      </figure>
    </div>
    <div class="media-content">
      <div class="content">
        <p class="commentHeader">
		  <strong data-tx="t0030">☎ <th:block th:text="${comment.phone}"/></strong>
          <small>
          <a target="_blank" th:href="@{/link/{service}/phone(service=${comment.service}, phone=${comment.phone})}" th:if="${comment.service}" th:text="${comment.service}"/>
		  <span data-tx="t0031" th:unless="${comment.service}">PhoneBlock</span>
		  </small>
		  <small th:text="${#dates.format(#converters.fromEpoch(comment.created))}"/>
        </p>
        <p class="commentText" th:text="${comment.comment}">
        </p>
      </div>
            
      <nav class="level is-mobile">
        <div class="level-left">
          <a aria-label="Guter Hinweis" class="level-item thumbs-up commentVote" href="#" th:data-comment-id="${comment.id}" th:data-vote-down-id="'down-' + ${commentIt.current}" th:data-vote-up-id="'up-' + ${commentIt.current}" title="Guter Hinweis!">
            <span class="icon">
              <i class="fa-solid fa-thumbs-up"/>
            </span>
            <span th:id="'up-' + ${commentIt.current}" th:text="${comment.up}"/>
          </a>
          <a aria-label="Unsinn" class="level-item thumbs-down commentVote" href="#" th:data-comment-id="${comment.id}" th:data-vote-down-id="'down-' + ${commentIt.current}" th:data-vote-up-id="'up-' + ${commentIt.current}" title="Unsinn!">
            <span class="icon">
              <i class="fa-solid fa-thumbs-down"/>
            </span>
			<span th:id="'down-' + ${commentIt.current}" th:text="${comment.down}"/>
          </a>
        </div>
      </nav>
    </div>
  </article>
</div>
	
	</th:block>
</th:block>

	<nav aria-label="pagination" class="pagination is-centered" role="navigation">
		<a class="pagination-previous" data-onclick="showNumber" data-tx="t0032" th:href="@{/nums/{num}(num=${prev})}" th:if="${prev}">Vorherige Nummer</a>
		<a class="pagination-next" data-onclick="showNumber" data-tx="t0033" th:href="@{/nums/{num}(num=${next})}" th:if="${next}">Nächste Nummer</a>
	</nav>
</div>
</section>

<section class="section">

<div class="tile is-ancestor" th:if="${android}">
	<div class="tile is-parent is-6">
		<a class="tile is-child notification is-primary" th:href="@{/setup-android/}">
			<p class="title" data-tx="t0034">PhoneBlock für Android</p>
			<p class="subtitle" data-tx="t0035">Noch nicht installiert? Dann los!</p>
		</a>
	</div>

	<div class="tile is-parent is-6 ">
		<a class="tile is-child notification is-info" th:href="@{/setup.jsp}">
			<p class="title" data-tx="t0036">PhoneBlock für Fritz!Box</p>
			<p class="subtitle" data-tx="t0037">Werbeanrufe auf dem Festnetz ausschalten!</p>
		</a>
	</div>
</div>

<div class="tile is-ancestor" th:if="${iphone}">
	<div class="tile is-parent is-6">
		<a class="tile is-child notification is-primary" th:href="@{/setup-ipone/}">
			<p class="title" data-tx="t0038">PhoneBlock für iPhobe</p>
			<p class="subtitle" data-tx="t0039">Noch nicht installiert? Dann los!</p>
		</a>
	</div>

	<div class="tile is-parent is-6 ">
		<a class="tile is-child notification is-info" th:href="@{/setup.jsp}">
			<p class="title" data-tx="t0040">PhoneBlock für Fritz!Box</p>
			<p class="subtitle" data-tx="t0041">Werbeanrufe auf dem Festnetz ausschalten!</p>
		</a>
	</div>
</div>

<div class="tile is-ancestor" th:if="${fritzbox}">
	<div class="tile is-parent is-6">
		<a class="tile is-child notification is-primary" th:href="@{/login.jsp(location='/setup.jsp')}">
			<p class="title" data-tx="t0042">PhoneBlock installieren</p>
			<p class="subtitle" data-tx="t0043">Account erstellen und einrichten!</p>
		</a>
	</div>

	<div class="tile is-parent is-6 ">
		<a class="tile is-child notification is-info" th:href="@{/setup.jsp}">
			<p class="title" data-tx="t0044">Installation überprüfen</p>
			<p class="subtitle" data-tx="t0045">Check die Installationsanleitung!</p>
		</a>
	</div>
</div>

</section>

<div th:replace="~{fragments/page :: footer}"/>
</body>
</html>